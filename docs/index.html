<!DOCTYPE html>
<html>
<head>
    <title>Galaxy K8S Version Dashboard</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 40px; }
        .card { border: 1px solid #ddd; border-radius: 8px; padding: 20px; margin: 10px; display: inline-block; min-width: 250px; }
        .card h3 { margin-top: 0; }
        .version { font-size: 24px; font-weight: bold; color: #0366d6; }
        .label { color: #666; font-size: 12px; }
        .match { color: #22863a; }
        .mismatch { color: #cb2431; }
        #loading { color: #666; }
    </style>
</head>
<body>
    <h1>Galaxy K8S Version Dashboard</h1>
    <p id="loading">Loading versions...</p>
    <div id="dashboard"></div>

    <script>
        async function fetchVersions() {
            const repos = {
                'galaxy-helm': { chart: 'galaxy/Chart.yaml', type: 'helm' },
                'galaxy-helm-deps': { chart: 'galaxy-deps/Chart.yaml', type: 'helm' },
                'galaxy-k8s-boot': { version: 'VERSION', defaults: 'roles/galaxy_k8s_deployment/defaults/main.yml' }
            };

            const dashboard = document.getElementById('dashboard');
            document.getElementById('loading').style.display = 'none';

            for (const [repo, config] of Object.entries(repos)) {
                const card = document.createElement('div');
                card.className = 'card';

                // Fetch release
                const releaseRes = await fetch(`https://api.github.com/repos/galaxyproject/${repo}/releases/latest`);
                const release = await releaseRes.json();

                let html = `<h3>${repo}</h3>`;
                html += `<div class="label">Latest Release</div>`;
                html += `<div class="version">${release.tag_name || 'N/A'}</div>`;

                card.innerHTML = html;
                dashboard.appendChild(card);
            }
        }

        fetchVersions();
    </script>
</body>
</html>